<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Virtual Barbershop</title>
    <script type="text/javascript" src="js/jquery-1.3.2.js"></script>
    <script>
        function sendForm() {
            var loc = location.href;
            loc = loc.substring(0, loc.lastIndexOf('/'));

            var oOutput = document.getElementById("output");
            var oData = new FormData(document.getElementById("formElement"));

            oData.append("action", "upload");

            var oXHR = new XMLHttpRequest();
            oXHR.open("POST", loc + '/vb', true);
            oXHR.onreadystatechange = function(oEvent) {
                if (oXHR.readyState == 4) {
                    oOutput.innerHTML = oXHR.response;
                }
            };
            oXHR.send(oData);
        }
    </script>
</head>
<body>
    <form enctype="multipart/form-data" method="post" id="formElement">
        <table>
            <tr>
                <td>Picture:</td>
                <td><input type="file" name="imagefile" size="50"/></td>
            </tr>
        </table>
        <button onclick="sendForm();">Upload</button>
    </form>
    <br/>

    <div id="output" style="border: 1px solid black"></div>
</body>
</html>